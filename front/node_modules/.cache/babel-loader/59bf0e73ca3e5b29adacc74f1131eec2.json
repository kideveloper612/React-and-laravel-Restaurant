{"ast":null,"code":"import _objectSpread from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\3-Limyong\\\\front\\\\src\\\\scenes\\\\Home\\\\scenes\\\\MenuItems\\\\scenes\\\\Add\\\\Add.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { toastr } from 'react-redux-toastr';\nimport Swal from 'sweetalert2'; // Import Components\n\nimport { Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { ImageUploader } from 'components'; // Import Actions\n\nimport { addItem } from 'services/item/itemActions';\nimport { getMenus } from 'services/menu/menuActions'; // Import Utility functions\n\nimport { errorMsg } from 'services/utils'; // Import settings\n\nimport settings from 'config/settings';\n\nvar Add =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Add, _React$Component);\n\n  function Add(props) {\n    var _this;\n\n    _classCallCheck(this, Add);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Add).call(this, props));\n    _this.state = {\n      name: '',\n      order: 1,\n      price: 0,\n      menu_id: _this.props.menu.menus ? _this.props.menu.menus.data[0].id : ''\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOnLoad = _this.handleOnLoad.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Add, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.menuActions.getMenus();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.item.error !== prevProps.item.error && this.props.item.error !== null) {\n        var msg = errorMsg(this.props.item.error);\n        toastr.error(msg.title, msg.message);\n      }\n\n      if (this.props.menu.error !== prevProps.menu.error && this.props.menu.error !== null) {\n        var _msg = errorMsg(this.props.menu.error);\n\n        toastr.error(_msg.title, _msg.message);\n      }\n\n      if (this.props.item.success !== prevProps.item.success && this.props.item.success === true) {\n        toastr.success('Success', this.props.item.message);\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handleOnLoad\",\n    value: function handleOnLoad(file, file_type, file_name) {\n      this.setState({\n        file: file,\n        file_type: file_type,\n        file_name: file_name\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit() {\n      if (this.state.name === '') {\n        toastr.error('Error', 'Category name can not be an empty value');\n        return;\n      }\n\n      var item = {\n        name: this.state.name,\n        price: parseFloat(this.state.price) * settings.INTEGER_PRECISION,\n        menu_id: this.state.menu_id,\n        file: this.state.file,\n        order: this.state.order,\n        file_type: this.state.file_type,\n        file_name: this.state.file_name\n      };\n      this.props.itemActions.addItem(item);\n    }\n  }, {\n    key: \"renderMenuOptions\",\n    value: function renderMenuOptions(menus) {\n      if (menus !== null) {\n        return menus.data.map(function (menu, index) {\n          return React.createElement(\"option\", {\n            value: menu.id,\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }, menu.name + \" (\".concat(menu.restaurant.name, \")\"));\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          loading = _this$props.loading,\n          message = _this$props.message;\n      var imageUploaderStyle = {\n        position: 'relative',\n        width: '60%',\n        height: 'auto',\n        minHeight: '300px',\n        borderWidth: '2px',\n        borderColor: 'rgb(102, 102, 102)',\n        borderStyle: 'dashed',\n        borderRadius: '5px'\n      };\n\n      if (loading) {\n        Swal({\n          title: 'Please wait...',\n          text: message,\n          onOpen: function onOpen() {\n            Swal.showLoading();\n          },\n          allowOutsideClick: false,\n          allowEscapeKey: false,\n          allowEnterKey: false\n        });\n      } else {\n        Swal.close();\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Item Add\"), React.createElement(Form, {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Item\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"name\",\n        id: \"name\",\n        placeholder: \"Item name here\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Price\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"price\",\n        id: \"price\",\n        placeholder: \"\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"menu_id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Menu\"), React.createElement(Input, {\n        type: \"select\",\n        name: \"menu_id\",\n        id: \"menu_id\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, this.renderMenuOptions(this.props.menu.menus))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"order\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Order\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"order\",\n        id: \"order\",\n        defaultValue: 1,\n        placeholder: \"Order\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Image\"), React.createElement(ImageUploader, {\n        style: imageUploaderStyle,\n        handleOnLoad: this.handleOnLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.handleSubmit,\n        className: \"float-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Submit\")));\n    }\n  }]);\n\n  return Add;\n}(React.Component);\n\nexport default connect(function (state) {\n  return {\n    item: _objectSpread({}, state.default.services.item),\n    menu: _objectSpread({}, state.default.services.menu)\n  };\n}, function (dispatch) {\n  return {\n    itemActions: bindActionCreators({\n      addItem: addItem\n    }, dispatch),\n    menuActions: bindActionCreators({\n      getMenus: getMenus\n    }, dispatch)\n  };\n})(Add);","map":{"version":3,"sources":["E:\\3-Limyong\\front\\src\\scenes\\Home\\scenes\\MenuItems\\scenes\\Add\\Add.js"],"names":["React","connect","bindActionCreators","toastr","Swal","Button","Form","FormGroup","Label","Input","ImageUploader","addItem","getMenus","errorMsg","settings","Add","props","state","name","order","price","menu_id","menu","menus","data","id","onChange","bind","handleSubmit","handleOnLoad","menuActions","prevProps","item","error","msg","title","message","success","e","setState","target","value","file","file_type","file_name","parseFloat","INTEGER_PRECISION","itemActions","map","index","restaurant","loading","imageUploaderStyle","position","width","height","minHeight","borderWidth","borderColor","borderStyle","borderRadius","text","onOpen","showLoading","allowOutsideClick","allowEscapeKey","allowEnterKey","close","renderMenuOptions","Component","default","services","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { toastr } from 'react-redux-toastr';\nimport Swal from 'sweetalert2';\n\n// Import Components\nimport { Button, Form, FormGroup, Label, Input } from 'reactstrap';\n\nimport { ImageUploader } from 'components';\n\n// Import Actions\nimport { addItem } from 'services/item/itemActions';\nimport { getMenus } from 'services/menu/menuActions';\n\n// Import Utility functions\nimport { errorMsg } from 'services/utils';\n\n// Import settings\nimport settings from 'config/settings';\n\nclass Add extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      order: 1,\n      price: 0,\n      menu_id: this.props.menu.menus ? this.props.menu.menus.data[0].id : ''\n    };\n    this.onChange = this.onChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleOnLoad = this.handleOnLoad.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.menuActions.getMenus();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.item.error !== prevProps.item.error &&\n      this.props.item.error !== null\n    ) {\n      let msg = errorMsg(this.props.item.error);\n      toastr.error(msg.title, msg.message);\n    }\n\n    if (\n      this.props.menu.error !== prevProps.menu.error &&\n      this.props.menu.error !== null\n    ) {\n      let msg = errorMsg(this.props.menu.error);\n      toastr.error(msg.title, msg.message);\n    }\n\n    if (\n      this.props.item.success !== prevProps.item.success &&\n      this.props.item.success === true\n    ) {\n      toastr.success('Success', this.props.item.message);\n    }\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleOnLoad(file, file_type, file_name) {\n    this.setState({\n      file,\n      file_type,\n      file_name\n    });\n  }\n\n  handleSubmit() {\n    if (this.state.name === '') {\n      toastr.error('Error', 'Category name can not be an empty value');\n      return;\n    }\n\n    const item = {\n      name: this.state.name,\n      price: parseFloat(this.state.price) * settings.INTEGER_PRECISION,\n      menu_id: this.state.menu_id,\n      file: this.state.file,\n      order: this.state.order,\n      file_type: this.state.file_type,\n      file_name: this.state.file_name\n    };\n\n    this.props.itemActions.addItem(item);\n  }\n\n  renderMenuOptions(menus) {\n    if (menus !== null) {\n      return menus.data.map((menu, index) => (\n        <option value={menu.id} key={index}>\n          {menu.name + ` (${menu.restaurant.name})`}\n        </option>\n      ));\n    }\n  }\n\n  render() {\n    const { loading, message } = this.props;\n\n    const imageUploaderStyle = {\n      position: 'relative',\n      width: '60%',\n      height: 'auto',\n      minHeight: '300px',\n      borderWidth: '2px',\n      borderColor: 'rgb(102, 102, 102)',\n      borderStyle: 'dashed',\n      borderRadius: '5px'\n    };\n\n    if (loading) {\n      Swal({\n        title: 'Please wait...',\n        text: message,\n        onOpen: () => {\n          Swal.showLoading();\n        },\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        allowEnterKey: false\n      });\n    } else {\n      Swal.close();\n    }\n\n    return (\n      <div>\n        <strong>Item Add</strong>\n        <Form className=\"mt-3\">\n          <FormGroup>\n            <Label for=\"name\">Item</Label>\n            <Input\n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              placeholder=\"Item name here\"\n              onChange={this.onChange}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"price\">Price</Label>\n            <Input\n              type=\"text\"\n              name=\"price\"\n              id=\"price\"\n              placeholder=\"\"\n              onChange={this.onChange}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"menu_id\">Menu</Label>\n            <Input\n              type=\"select\"\n              name=\"menu_id\"\n              id=\"menu_id\"\n              onChange={this.onChange}\n            >\n              {this.renderMenuOptions(this.props.menu.menus)}\n            </Input>\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"order\">Order</Label>\n            <Input\n              type=\"text\"\n              name=\"order\"\n              id=\"order\"\n              defaultValue={1}\n              placeholder=\"Order\"\n              onChange={this.onChange}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>Image</Label>\n            <ImageUploader\n              style={imageUploaderStyle}\n              handleOnLoad={this.handleOnLoad}\n            />\n          </FormGroup>\n          <Button\n            color=\"primary\"\n            onClick={this.handleSubmit}\n            className=\"float-right\"\n          >\n            Submit\n          </Button>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    item: {\n      ...state.default.services.item\n    },\n    menu: {\n      ...state.default.services.menu\n    }\n  }),\n  dispatch => ({\n    itemActions: bindActionCreators({ addItem }, dispatch),\n    menuActions: bindActionCreators({ getMenus }, dispatch)\n  })\n)(Add);\n"]},"metadata":{},"sourceType":"module"}