{"ast":null,"code":"import _classCallCheck from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\3-Limyong\\\\front\\\\src\\\\modals\\\\components\\\\QRCode\\\\QRCode.js\";\nimport React from 'react';\nimport { Form, FormGroup, Label, Input } from 'reactstrap';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport $ from 'jquery';\nimport Switch from 'react-toggle-switch';\nimport settings from 'config/settings.js';\nimport default_image from '../../../assets/images/logo-gray.jpg'; // Import actions\n\nimport { hideModal } from '../../modalConductorActions';\nimport { timeout } from 'q';\n\nvar QRCode =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(QRCode, _React$Component);\n\n  function QRCode(props) {\n    var _this;\n\n    _classCallCheck(this, QRCode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QRCode).call(this, props));\n    _this.state = {\n      is_open: 1,\n      restaurant_id: _this.props.modal.params,\n      info: \"\"\n    };\n    _this.hideModal = _this.hideModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onGenerate = _this.onGenerate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDownload = _this.onDownload.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onStateChange = _this.onStateChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onCancel = _this.onCancel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(QRCode, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var self = this;\n      $.post(settings.BASE_URL + '/api/qrcode', {\n        restaurant_id: this.state.restaurant_id\n      }, function (result) {\n        result = JSON.parse(result).data;\n\n        if (result.length > 0) {\n          $(\"#qrcode_image\").attr('src', settings.BASE_URL + '/' + result[0].image_url);\n          self.setState({\n            is_open: result[0].status\n          });\n        }\n      });\n    }\n  }, {\n    key: \"hideModal\",\n    value: function hideModal() {\n      this.props.modalActions.hideModal();\n    }\n  }, {\n    key: \"onChangeInfo\",\n    value: function onChangeInfo(e) {\n      this.setState({\n        info: e.target.value\n      });\n    }\n  }, {\n    key: \"onStateChange\",\n    value: function onStateChange() {\n      this.setState({\n        is_open: ~~!this.state.is_open\n      });\n      $.post(settings.BASE_URL + '/api/set_qrcode_status', {\n        restaurant_id: this.state.restaurant_id,\n        status: ~~!this.state.is_open\n      }, function (result) {\n        console.log(result);\n      });\n    }\n  }, {\n    key: \"onGenerate\",\n    value: function onGenerate() {\n      $.post(settings.BASE_URL + '/api/qrcode_generate', {\n        restaurant_id: this.state.restaurant_id,\n        info: this.state.info\n      }, function (result) {\n        var path = result;\n        $(\"#qrcode_image\").attr('src', settings.BASE_URL + '/' + path);\n      });\n    }\n  }, {\n    key: \"onDownload\",\n    value: function onDownload() {\n      window.open(settings.BASE_URL + '/api/qrcode_download?restaurant_id=' + this.state.restaurant_id);\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel() {\n      this.hideModal();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Modal, {\n        isOpen: true,\n        toggle: this.hideModal,\n        className: \"modal-dialog-centered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \" QRCode \"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"text\",\n        name: \"info\",\n        id: \"info\",\n        placeholder: \"Type simple information\",\n        value: this.state.info,\n        onChange: function onChange(e) {\n          return _this2.onChangeInfo(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: default_image,\n        width: \"300\",\n        height: \"300\",\n        id: \"qrcode_image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), React.createElement(\"a\", {\n        href: \"http://localhost:8000/storage/qrcode/1_1559358180.png\",\n        download: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }))), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        id: \"is_open\",\n        onClick: this.onStateChange,\n        on: !!this.state.is_open,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.onGenerate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Generate\"), React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.onDownload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Download\"), React.createElement(Button, {\n        color: \"default\",\n        onClick: this.onCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Cancel\")));\n    }\n  }]);\n\n  return QRCode;\n}(React.Component);\n\nexport default connect(null, function (dispatch) {\n  return {\n    modalActions: bindActionCreators({\n      hideModal: hideModal\n    }, dispatch)\n  };\n})(QRCode);","map":{"version":3,"sources":["E:\\3-Limyong\\front\\src\\modals\\components\\QRCode\\QRCode.js"],"names":["React","Form","FormGroup","Label","Input","Button","Modal","ModalHeader","ModalBody","ModalFooter","connect","bindActionCreators","$","Switch","settings","default_image","hideModal","timeout","QRCode","props","state","is_open","restaurant_id","modal","params","info","bind","onGenerate","onDownload","onStateChange","onCancel","self","post","BASE_URL","result","JSON","parse","data","length","attr","image_url","setState","status","modalActions","e","target","value","console","log","path","window","open","onChangeInfo","Component","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, FormGroup, Label, Input } from 'reactstrap';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport $ from 'jquery';\nimport Switch from 'react-toggle-switch';\nimport settings from 'config/settings.js';\nimport default_image from '../../../assets/images/logo-gray.jpg';\n// Import actions\nimport { hideModal } from '../../modalConductorActions';\nimport { timeout } from 'q';\n\nclass QRCode extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n       is_open: 1,\n       restaurant_id : this.props.modal.params,\n       info: \"\"\n    };\n    this.hideModal = this.hideModal.bind(this);\n    this.onGenerate = this.onGenerate.bind(this);\n    this.onDownload = this.onDownload.bind(this);\n    this.onStateChange = this.onStateChange.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n  }\n\n  componentDidMount() {\n    var self = this;\n    $.post(settings.BASE_URL + '/api/qrcode', { restaurant_id: this.state.restaurant_id },  function(result) {\n        result = JSON.parse(result).data;\n        if(result.length > 0){\n            $(\"#qrcode_image\").attr('src', settings.BASE_URL + '/' + result[0].image_url);\n            self.setState({\n                is_open: result[0].status\n            })\n        }\n    });\n  }\n\n  hideModal() {\n    this.props.modalActions.hideModal();\n  }\n\n  onChangeInfo(e) {\n      this.setState({\n          info: e.target.value\n      })\n  }\n\n  onStateChange() {\n    this.setState({ is_open: ~~!this.state.is_open });\n    $.post(settings.BASE_URL + '/api/set_qrcode_status', { restaurant_id: this.state.restaurant_id, status: ~~!this.state.is_open },  function(result) {\n        console.log(result);\n    });\n  }\n\n  onGenerate() {\n    $.post(settings.BASE_URL + '/api/qrcode_generate', { restaurant_id: this.state.restaurant_id, info: this.state.info },  function(result) {\n        var path = result;\n        $(\"#qrcode_image\").attr('src', settings.BASE_URL + '/' + path);\n    });\n  }\n\n  onDownload() {\n    window.open(settings.BASE_URL + '/api/qrcode_download?restaurant_id=' + this.state.restaurant_id);\n  }\n\n  onCancel() {\n    this.hideModal();\n  }\n\n  render() {\n    return (\n        <Modal\n            isOpen={true}\n            toggle={this.hideModal}\n            className=\"modal-dialog-centered\"\n        >\n        <ModalHeader> QRCode </ModalHeader>\n\n        <ModalBody>\n            <Form>\n                <FormGroup>\n                    <Input\n                        type=\"text\"\n                        name=\"info\"\n                        id=\"info\"\n                        placeholder=\"Type simple information\"\n                        value = {this.state.info}\n                        onChange={(e)=>this.onChangeInfo(e)}\n                    />\n                </FormGroup>\n                <FormGroup className=\"text-center\">\n                    <img src={default_image} width=\"300\" height=\"300\" id=\"qrcode_image\" />\n                </FormGroup>\n                <a href=\"http://localhost:8000/storage/qrcode/1_1559358180.png\" download/>\n            </Form>\n        </ModalBody>\n\n        <ModalFooter>\n          <Switch\n            id=\"is_open\"\n            onClick={this.onStateChange}\n            on={!!this.state.is_open}\n            />\n          <Button color=\"primary\" onClick={this.onGenerate}>\n            Generate\n          </Button>\n          <Button color=\"primary\" onClick={this.onDownload}>\n            Download\n          </Button>\n          <Button color=\"default\" onClick={this.onCancel}>\n            Cancel\n          </Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nexport default connect(\n    null,\n    dispatch => ({\n        modalActions: bindActionCreators({ hideModal }, dispatch)\n    })\n)(QRCode);\n"]},"metadata":{},"sourceType":"module"}