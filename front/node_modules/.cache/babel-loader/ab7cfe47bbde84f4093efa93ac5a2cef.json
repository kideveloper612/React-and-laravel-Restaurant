{"ast":null,"code":"import _defineProperty from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\3-Limyong\\\\front\\\\src\\\\modals\\\\components\\\\ItemAdd\\\\ItemAdd.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport queryString from 'query-string';\nimport { withRouter } from 'react-router-dom';\nimport { Form, FormGroup, Label, Input } from 'reactstrap';\nimport { ImageUploader } from 'components';\nimport Select from 'react-select';\nimport ModalWrapper from '../ModalWrapper'; // import Actions\n\nimport { addItem1 } from 'services/item/itemActions';\nimport { getMenus } from 'services/menu/menuActions';\nimport { getRestaurants } from 'services/restaurant/restaurantActions'; // Import Settings\n\nimport settings from 'config/settings';\n\nvar ItemAdd =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ItemAdd, _React$Component);\n\n  function ItemAdd(props) {\n    var _this;\n\n    _classCallCheck(this, ItemAdd);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ItemAdd).call(this, props));\n    _this.state = {};\n    _this.submit_data = {\n      order: 1\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onLoad = _this.onLoad.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onMenuChange = _this.onMenuChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onRestaurantChange = _this.onRestaurantChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ItemAdd, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.restaurantActions.getRestaurants();\n      this.props.menuActions.getMenus();\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(e) {\n      this.submit_data = _objectSpread({}, this.submit_data, _defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"onLoad\",\n    value: function onLoad(file, file_type, file_name) {\n      this.submit_data = _objectSpread({}, this.submit_data, {\n        file: file,\n        file_type: file_type,\n        file_name: file_name\n      });\n    }\n  }, {\n    key: \"onMenuChange\",\n    value: function onMenuChange(menu) {\n      this.setState({\n        menu: menu\n      });\n    }\n  }, {\n    key: \"onRestaurantChange\",\n    value: function onRestaurantChange(e) {\n      /* eslint-disable-next-line */\n      if (e.target.value != -1) {\n        this.props.menuActions.getMenus({\n          restaurant: e.target.value\n        });\n      } else {\n        this.props.menuActions.getMenus();\n      }\n    }\n  }, {\n    key: \"onMenuOptions\",\n    value: function onMenuOptions(menus) {\n      if (menus && menus.data) {\n        var options = menus.data.map(function (menu) {\n          return {\n            value: menu.id,\n            label: \"\".concat(menu.name, \" (\").concat(menu.restaurant.name, \")\")\n          };\n        });\n        return React.createElement(Select, {\n          options: options,\n          onChange: this.onMenuChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        });\n      }\n    }\n  }, {\n    key: \"renderRestaurantOptions\",\n    value: function renderRestaurantOptions(restaurants) {\n      if (restaurants !== null) {\n        return restaurants.data.map(function (restaurant, index) {\n          return React.createElement(\"option\", {\n            value: restaurant.id,\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }, restaurant.name);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(ModalWrapper, {\n        title: \"Item add\",\n        okText: \"Submit\",\n        onOk: function onOk() {\n          var params = queryString.parse(_this2.props.location.search);\n          var item = {\n            name: _this2.submit_data.name,\n            menu_id: _this2.state.menu.value,\n            price: parseFloat(_this2.submit_data.price) * settings.INTEGER_PRECISION,\n            order: _this2.submit_data.order,\n            file: _this2.submit_data.file,\n            file_type: _this2.submit_data.file_type,\n            file_name: _this2.submit_data.file_name\n          };\n\n          _this2.props.itemActions.addItem1(item, params);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Form, {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \" Name \"), React.createElement(Input, {\n        type: \"text\",\n        name: \"name\",\n        id: \"name\",\n        placeholder: \"Item name here\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"restaurant_id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Restaurant\"), React.createElement(Input, {\n        type: \"select\",\n        name: \"restaurant_id\",\n        id: \"restaurant_id\",\n        onChange: this.onRestaurantChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \" No select \"), this.renderRestaurantOptions(this.props.restaurant.restaurants))), React.createElement(Label, {\n        for: \"menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Menu\"), this.onMenuOptions(this.props.menu.menus), \"\\xA0\\xA0\", React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \" Price \"), React.createElement(Input, {\n        type: \"text\",\n        name: \"price\",\n        id: \"price\",\n        placeholder: \"Item price here\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"order\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Order\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"order\",\n        id: \"order\",\n        placeholder: \"Order\",\n        defaultValue: 1,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(ImageUploader, {\n        style: {\n          position: 'relative',\n          width: '100%',\n          height: 'auto',\n          minHeight: '300px',\n          borderWidth: '2px',\n          borderColor: 'rgb(102, 102, 102)',\n          borderStyle: 'dashed',\n          borderRadius: '5px'\n        },\n        handleOnLoad: this.onLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ItemAdd;\n}(React.Component);\n\nItemAdd = withRouter(ItemAdd);\nexport default connect(function (state) {\n  return {\n    menu: _objectSpread({}, state.default.services.menu),\n    restaurant: _objectSpread({}, state.default.services.restaurant)\n  };\n}, function (dispatch) {\n  return {\n    itemActions: bindActionCreators({\n      addItem1: addItem1\n    }, dispatch),\n    menuActions: bindActionCreators({\n      getMenus: getMenus\n    }, dispatch),\n    restaurantActions: bindActionCreators({\n      getRestaurants: getRestaurants\n    }, dispatch)\n  };\n})(ItemAdd);","map":{"version":3,"sources":["E:\\3-Limyong\\front\\src\\modals\\components\\ItemAdd\\ItemAdd.js"],"names":["React","connect","bindActionCreators","queryString","withRouter","Form","FormGroup","Label","Input","ImageUploader","Select","ModalWrapper","addItem1","getMenus","getRestaurants","settings","ItemAdd","props","state","submit_data","order","onChange","bind","onLoad","onMenuChange","onRestaurantChange","restaurantActions","menuActions","e","target","name","value","file","file_type","file_name","menu","setState","restaurant","menus","data","options","map","id","label","restaurants","index","params","parse","location","search","item","menu_id","price","parseFloat","INTEGER_PRECISION","itemActions","renderRestaurantOptions","onMenuOptions","position","width","height","minHeight","borderWidth","borderColor","borderStyle","borderRadius","Component","default","services","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport queryString from 'query-string';\nimport { withRouter } from 'react-router-dom';\nimport { Form, FormGroup, Label, Input } from 'reactstrap';\n\nimport { ImageUploader } from 'components';\nimport Select from 'react-select';\nimport ModalWrapper from '../ModalWrapper';\n\n// import Actions\nimport { addItem1 } from 'services/item/itemActions';\nimport { getMenus } from 'services/menu/menuActions';\nimport { getRestaurants } from 'services/restaurant/restaurantActions';\n\n// Import Settings\nimport settings from 'config/settings';\n\nclass ItemAdd extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n    };\n    this.submit_data = { order: 1 };\n\n    this.onChange = this.onChange.bind(this);\n    this.onLoad = this.onLoad.bind(this);\n    this.onMenuChange = this.onMenuChange.bind(this);\n    this.onRestaurantChange = this.onRestaurantChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.restaurantActions.getRestaurants();\n    this.props.menuActions.getMenus();\n  }\n\n  onChange(e) {\n    this.submit_data = {\n      ...this.submit_data,\n      [e.target.name]: e.target.value\n    };\n  }\n\n  onLoad(file, file_type, file_name) {\n    this.submit_data = {\n      ...this.submit_data,\n      file,\n      file_type,\n      file_name\n    };\n  }\n\n  onMenuChange(menu) {\n    this.setState({\n      menu\n    });\n  }\n\n  onRestaurantChange(e) {\n    /* eslint-disable-next-line */\n    if (e.target.value != -1) {\n      this.props.menuActions.getMenus({\n        restaurant: e.target.value\n      });\n    } else {\n      this.props.menuActions.getMenus();\n    }\n  }\n\n  onMenuOptions(menus) {\n    if (menus && menus.data) {\n      const options = menus.data.map(menu => {\n        return {\n          value: menu.id,\n          label: `${menu.name} (${menu.restaurant.name})`\n        };\n      });\n      return (\n        <Select options={options} onChange={this.onMenuChange} />\n      );\n    }\n  }\n\n  renderRestaurantOptions(restaurants) {\n    if (restaurants !== null) {\n      return restaurants.data.map((restaurant, index) => (\n        <option value={restaurant.id} key={index}>\n          {restaurant.name}\n        </option>\n      ));\n    }\n  }\n\n  render() {\n    return (\n      <ModalWrapper\n        title=\"Item add\"\n        okText=\"Submit\"\n        onOk={() => {\n          const params = queryString.parse(this.props.location.search);\n\n          const item = {\n            name: this.submit_data.name,\n            menu_id : this.state.menu.value,\n            price: parseFloat(this.submit_data.price) * settings.INTEGER_PRECISION,\n            order: this.submit_data.order,\n            file: this.submit_data.file,\n            file_type: this.submit_data.file_type,\n            file_name: this.submit_data.file_name\n          };\n\n          this.props.itemActions.addItem1(item, params);\n        }}\n      >\n        <Form className=\"mt-3\">\n          {/* Item name here */}\n          <FormGroup>\n            <Label for=\"name\"> Name </Label>\n            <Input\n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              placeholder=\"Item name here\"\n              onChange={this.onChange}\n            />\n          </FormGroup>\n\n          {/* Restaurant */}\n          <FormGroup>\n            <Label for=\"restaurant_id\">Restaurant</Label>\n            <Input\n              type=\"select\"\n              name=\"restaurant_id\"\n              id=\"restaurant_id\"\n              onChange={this.onRestaurantChange}\n            >\n              <option value=\"-1\"> No select </option>\n              {this.renderRestaurantOptions(this.props.restaurant.restaurants)}\n            </Input>\n          </FormGroup>\n\n          {/* Menu Select form */}\n          <Label for=\"menu\">Menu</Label>\n          {this.onMenuOptions(this.props.menu.menus)}\n          &nbsp;&nbsp;\n          {/* Item price here */}\n          <FormGroup>\n            <Label for=\"price\"> Price </Label>\n            <Input\n              type=\"text\"\n              name=\"price\"\n              id=\"price\"\n              placeholder=\"Item price here\"\n              onChange={this.onChange}\n            />\n          </FormGroup>\n\n          {/* Order */}\n          <FormGroup>\n            <Label for=\"order\">Order</Label>\n            <Input\n              type=\"text\"\n              name=\"order\"\n              id=\"order\"\n              placeholder=\"Order\"\n              defaultValue={1}\n              onChange={this.onChange}\n            />\n          </FormGroup>\n\n          {/* Image Upload form*/}\n          <ImageUploader\n            style={{\n              position: 'relative',\n              width: '100%',\n              height: 'auto',\n              minHeight: '300px',\n              borderWidth: '2px',\n              borderColor: 'rgb(102, 102, 102)',\n              borderStyle: 'dashed',\n              borderRadius: '5px'\n            }}\n            handleOnLoad={this.onLoad}\n          />\n        </Form>\n      </ModalWrapper>\n    );\n  }\n}\n\nItemAdd = withRouter(ItemAdd);\n\nexport default connect(\n  state => ({\n    menu: {\n      ...state.default.services.menu\n    },\n    restaurant: {\n      ...state.default.services.restaurant\n    }\n  }),\n  dispatch => ({\n    itemActions: bindActionCreators({ addItem1 }, dispatch),\n    menuActions: bindActionCreators({ getMenus }, dispatch),\n    restaurantActions: bindActionCreators({ getRestaurants }, dispatch)\n  })\n)(ItemAdd);\n"]},"metadata":{},"sourceType":"module"}