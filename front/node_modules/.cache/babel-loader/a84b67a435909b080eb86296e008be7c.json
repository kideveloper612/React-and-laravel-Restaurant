{"ast":null,"code":"import _objectSpread from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\3-Limyong\\\\front\\\\src\\\\scenes\\\\Home\\\\scenes\\\\Menu\\\\scenes\\\\List\\\\components\\\\MenuTable\\\\MenuTable.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Table, Button, UncontrolledCollapse, Input } from 'reactstrap';\nimport Swal from 'sweetalert2';\nimport { withRouter } from 'react-router-dom';\nimport { toastr } from 'react-redux-toastr';\nimport CSVParse from 'csv-parse';\nimport moment from 'moment'; // Import components\n\nimport ImageUploader from './../ImageUploader';\nimport MenuEditModal from './../MenuEditModal'; // Import Actions\n\nimport { deleteMenu } from 'services/menu/menuActions';\nimport { addItem, addItems, deleteItem, addItems1, updateItem } from 'services/item/itemActions';\nimport { getRestaurants } from 'services/restaurant/restaurantActions'; // Import Settings\n\nimport settings from 'config/settings';\nimport queryString from 'query-string';\nvar imageUploaderStyle = {\n  position: 'relative',\n  height: '50px',\n  minHeight: '50px',\n  maxHeight: '50px',\n  borderWidth: '2px',\n  borderColor: 'rgb(102, 102, 102)',\n  borderStyle: 'dashed',\n  borderRadius: '5px'\n};\n\nvar MenuTable =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuTable, _React$Component);\n\n  function MenuTable(props) {\n    var _this;\n\n    _classCallCheck(this, MenuTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuTable).call(this, props));\n    _this.submitData = []; // menu item submit data\n\n    _this.editData = []; // menu item edit data\n\n    _this.modal_data = {}; // Modal dialog data\n\n    _this.state = {\n      modal: false // modal dialog flag\n\n    };\n    _this.renderMenuTable = _this.renderMenuTable.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleEdit = _this.handleEdit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDelete = _this.handleDelete.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOnLoad = _this.handleOnLoad.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOnLoadForEdit = _this.handleOnLoadForEdit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleEditMenuItem = _this.handleEditMenuItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDeleteMenuItem = _this.handleDeleteMenuItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderSubmitItems = _this.renderSubmitItems.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addMenuItemInput = _this.addMenuItemInput.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUpdateMenuItem = _this.handleUpdateMenuItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onClickAddItemFromExcel = _this.onClickAddItemFromExcel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeCSVFile = _this.onChangeCSVFile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onExportCSV = _this.onExportCSV.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MenuTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.restaurantActions.getRestaurants();\n    }\n    /**\n     * Toggle modal dialog\n     */\n\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this.setState({\n        modal: !this.state.modal\n      });\n    }\n  }, {\n    key: \"handleEdit\",\n    value: function handleEdit(id) {\n      this.props.history.push(\"/menus/\".concat(id, \"/edit\"));\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(id) {\n      var _this2 = this;\n\n      Swal({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(function (result) {\n        if (result.value) {\n          _this2.props.menuActions.deleteMenu(id);\n        }\n      });\n    }\n  }, {\n    key: \"handleOnLoad\",\n    value: function handleOnLoad(file, file_type, file_name, menuId, inputItemIndex) {\n      this.submitData[menuId][inputItemIndex] = _objectSpread({}, this.submitData[menuId][inputItemIndex], {\n        file: file,\n        file_name: file_name,\n        file_type: file_type\n      });\n    }\n  }, {\n    key: \"handleOnLoadForEdit\",\n    value: function handleOnLoadForEdit(file, file_type, file_name, menuId, inputItemIndex) {\n      this.editData[menuId][inputItemIndex] = _objectSpread({}, this.editData[menuId][inputItemIndex], {\n        file: file,\n        file_name: file_name,\n        file_type: file_type\n      });\n    }\n  }, {\n    key: \"handleMenuItemSubmit\",\n    value: function handleMenuItemSubmit(id) {\n      var items = this.submitData[id];\n      var params = queryString.parse(this.props.location.search);\n      this.props.itemActions.addItems(items, params);\n    } /// Handle edit button click event\n\n  }, {\n    key: \"handleEditMenuItem\",\n    value: function handleEditMenuItem(id, e) {\n      e.stopPropagation();\n      this.props.history.push(\"/items/\".concat(id, \"/edit\"));\n    }\n  }, {\n    key: \"handleEditDataChange\",\n    value: function handleEditDataChange(menu_id, item_id, data) {\n      if (!this.editData[menu_id]) {\n        this.editData[menu_id] = [];\n      }\n\n      if (!this.editData[menu_id][item_id]) {\n        this.editData[menu_id][item_id] = {};\n      }\n\n      this.editData[menu_id][item_id] = _objectSpread({}, this.editData[menu_id][item_id], data);\n    }\n  }, {\n    key: \"handleUpdateMenuItem\",\n    value: function handleUpdateMenuItem(menu_id, item_id) {\n      var params = queryString.parse(this.props.location.search);\n      var data = {\n        id: item_id,\n        item: this.editData[menu_id][item_id],\n        params: params\n      };\n      this.props.itemActions.updateItem(data);\n    } /// Handle delete button click event\n\n  }, {\n    key: \"handleDeleteMenuItem\",\n    value: function handleDeleteMenuItem(id, e) {\n      var _this3 = this;\n\n      e.stopPropagation();\n      Swal({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(function (result) {\n        if (result.value) {\n          var params = queryString.parse(_this3.props.location.search);\n\n          _this3.props.itemActions.deleteItem(id, params);\n        }\n      });\n    }\n  }, {\n    key: \"onClickAddItemFromExcel\",\n    value: function onClickAddItemFromExcel(menu_id) {\n      localStorage.setItem(\"current_menu_id\", menu_id);\n      this.csvUploader.click();\n    }\n  }, {\n    key: \"onChangeCSVFile\",\n    value: function onChangeCSVFile(event) {\n      var _this4 = this;\n\n      var file = event.target.files[0];\n\n      if (file === undefined) {\n        return;\n      }\n\n      console.log(file);\n      var filename = file.name;\n\n      if (filename.substr(filename.length - 4, 4) !== \".csv\") {\n        toastr.warning('Warning', \"Please select .csv file\");\n        return;\n      }\n\n      var fileReader = new FileReader();\n      var output = [];\n\n      fileReader.onload = function () {\n        var params = queryString.parse(_this4.props.location.search);\n        CSVParse(fileReader.result, {}).on('readable', function () {\n          var record;\n\n          while (record = this.read()) {\n            var item = {};\n\n            if (record[6] === 'i') {\n              item['created_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['updated_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['id'] = record[0];\n              item['name'] = record[1];\n              item['order'] = record[2];\n              item['image_url'] = record[3];\n              item['menu_id'] = localStorage.getItem(\"current_menu_id\");\n              item['price'] = parseFloat(record[5]) * settings.INTEGER_PRECISION;\n              item['action'] = record[6];\n              output.push(item);\n            }\n          }\n        }).on('end', function () {\n          console.log(output);\n\n          if (output.length === 0) {\n            toastr.warning('Warning', \"No operations in file\");\n            return;\n          } else {\n            _this4.props.itemActions.addItems(output, params);\n          }\n        });\n      };\n\n      fileReader.readAsText(file, \"UTF-8\");\n    }\n  }, {\n    key: \"downloadCSV\",\n    value: function downloadCSV(csv, filename) {\n      var csvFile;\n      var downloadLink; // CSV file\n\n      csvFile = new Blob([\"\\uFEFF\" + csv], {\n        type: \"text/csv;charset=UTF-8\"\n      }); // Download link\n\n      downloadLink = document.createElement(\"a\"); // File name\n\n      downloadLink.download = filename; // Create a link to the file\n\n      downloadLink.href = window.URL.createObjectURL(csvFile); // Hide download link\n\n      downloadLink.style.display = \"none\"; // Add the link to DOM\n\n      document.body.appendChild(downloadLink); // Click download link\n\n      downloadLink.click();\n    }\n  }, {\n    key: \"exportTableToCSV\",\n    value: function exportTableToCSV(filename, menu_id) {\n      var csv = [];\n      csv.push(['Item_Id', 'Name', 'Order', 'Image Url', 'Menu_Id', 'Price', 'Act(i)'].join(','));\n      var rows = document.querySelectorAll(\".items_menu_\" + menu_id);\n\n      for (var i = 0; i < rows.length; i++) {\n        var row = [],\n            cols = rows[i].querySelectorAll(\".item\");\n        row.push(cols[0].attributes[1].value); // Item_Id\n\n        row.push(cols[0].innerText); // Name\n\n        row.push(cols[0].attributes[2].value); // Order\n\n        if (cols[0].attributes[3]) {\n          row.push(cols[0].attributes[3].value); // Image Url\n        } else {\n          row.push(\"\");\n        }\n\n        row.push(menu_id); // Menu_Id\n\n        row.push(cols[1].innerText); // Price\n\n        row.push(\"\"); // Operation\n\n        csv.push(row.join(\",\"));\n      } // Download CSV file\n\n\n      this.downloadCSV(csv.join(\"\\n\"), filename);\n    }\n  }, {\n    key: \"onExportCSV\",\n    value: function onExportCSV(menu_id) {\n      var self = this;\n      setTimeout(function () {\n        var filename = \"Items_Menu_\" + menu_id + \".csv\";\n        self.exportTableToCSV(filename, menu_id);\n      }, 500);\n    }\n  }, {\n    key: \"renderMenuItems\",\n    value: function renderMenuItems(item) {\n      var _this5 = this;\n\n      /// If edit data of this item is empty/undefined just initialize with {} object\n      if (!this.editData[item.menu_id]) {\n        this.editData[item.menu_id] = [];\n      }\n\n      if (!this.editData[item.menu_id][item.id]) {\n        this.editData[item.menu_id][item.id] = _objectSpread({}, item);\n      } ////////////////////////////////////////////////////////////////////////////\n\n\n      return React.createElement(\"div\", {\n        className: \"p-3 border-bottom items_menu_\" + item.menu_id,\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4 item\",\n        data_id: item.id,\n        data_order: item.order,\n        data_image_url: item.image_url,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, item.name), React.createElement(\"div\", {\n        className: \"col-md-4 item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, item.price / settings.INTEGER_PRECISION), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"sm\",\n        color: \"warning\",\n        id: \"toggle_menu_item_edit_\".concat(item.menu_id, \"_\").concat(item.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      })), React.createElement(Button, {\n        size: \"sm\",\n        color: \"danger\",\n        onClick: function onClick(e) {\n          _this5.handleDeleteMenuItem(item.id, e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-trash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      })))), React.createElement(UncontrolledCollapse, {\n        toggler: \"toggle_menu_item_edit_\".concat(item.menu_id, \"_\").concat(item.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"text\",\n        onChange: function onChange(evt) {\n          _this5.handleEditDataChange(item.menu_id, item.id, {\n            name: evt.target.value\n          });\n        },\n        placeholder: \"Name\",\n        defaultValue: item.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Price\",\n        onChange: function onChange(evt) {\n          _this5.handleEditDataChange(item.menu_id, item.id, {\n            price: parseFloat(evt.target.value) * settings.INTEGER_PRECISION\n          });\n        },\n        defaultValue: item.price / settings.INTEGER_PRECISION,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"text\",\n        onChange: function onChange(evt) {\n          _this5.handleEditDataChange(item.menu_id, item.id, {\n            order: evt.target.value\n          });\n        },\n        defaultValue: item.order,\n        placeholder: \"Order\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(ImageUploader, {\n        menuId: item.menu_id,\n        inputItemIndex: item.id,\n        style: imageUploaderStyle,\n        image: item.image_url ? settings.BASE_URL + item.image_url : '',\n        handleOnLoad: this.handleOnLoadForEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"secondary\",\n        onClick: function onClick() {\n          _this5.handleUpdateMenuItem(item.menu_id, item.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, \" Update\")))));\n    }\n  }, {\n    key: \"addMenuItemInput\",\n    value: function addMenuItemInput(menuId) {\n      if (this.submitData[menuId]) {} else {\n        this.submitData[menuId] = [];\n      }\n\n      var defaultItem = {\n        order: 1,\n        menu_id: menuId\n      };\n\n      if (this.submitData[menuId].length == 1) {\n        return;\n      }\n\n      this.submitData[menuId].push(defaultItem);\n      this.forceUpdate();\n    }\n  }, {\n    key: \"renderSubmitItems\",\n    value: function renderSubmitItems(menu) {\n      var _this6 = this;\n\n      if (this.submitData[menu.id] && this.submitData[menu.id].length > 0) {\n        // eslint-disable-next-line\n        return this.submitData[menu.id].map(function (item, index) {\n          return React.createElement(\"div\", {\n            className: \"row p-3\",\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 406\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"col-md-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 407\n            },\n            __self: this\n          }, React.createElement(Input, {\n            type: \"text\",\n            onChange: function onChange(evt) {\n              _this6.submitData[menu.id][index] = _objectSpread({}, _this6.submitData[menu.id][index], {\n                name: evt.target.value\n              });\n            },\n            placeholder: \"Name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 408\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"col-md-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 419\n            },\n            __self: this\n          }, React.createElement(Input, {\n            type: \"text\",\n            placeholder: \"Price\",\n            onChange: function onChange(evt) {\n              _this6.submitData[menu.id][index] = _objectSpread({}, _this6.submitData[menu.id][index], {\n                price: parseFloat(evt.target.value) * settings.INTEGER_PRECISION\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 420\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"col-md-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 432\n            },\n            __self: this\n          }, React.createElement(Input, {\n            type: \"text\",\n            onChange: function onChange(evt) {\n              _this6.submitData[menu.id][index] = _objectSpread({}, _this6.submitData[menu.id][index], {\n                order: evt.target.value\n              });\n            },\n            defaultValue: 1,\n            placeholder: \"Name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 433\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"col-md-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 445\n            },\n            __self: this\n          }, React.createElement(ImageUploader, {\n            menuId: menu.id,\n            inputItemIndex: index,\n            style: imageUploaderStyle,\n            handleOnLoad: _this6.handleOnLoad,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 446\n            },\n            __self: this\n          })));\n        });\n      }\n    }\n  }, {\n    key: \"renderMenuTable\",\n    value: function renderMenuTable() {\n      var _this7 = this;\n\n      var data = this.props.data;\n\n      if (data && data.length > 0) {\n        data.sort(function (a, b) {\n          var keyA = a.id,\n              keyB = b.id; // Compare the 2 keys\n\n          if (keyA < keyB) return -1;\n          if (keyA > keyB) return 1;\n          return 0;\n        });\n        return data.map(function (menu, index) {\n          return React.createElement(React.Fragment, {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 471\n            },\n            __self: this\n          }, React.createElement(\"tr\", {\n            id: \"toggle_menu_\".concat(index),\n            className: \"menu-toggle\",\n            key: menu.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 472\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            scope: \"row\",\n            data_id: menu.id,\n            data_image_url: menu.image_url,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 473\n            },\n            __self: this\n          }, index + 1, \" \\xA0\\xA0\\xA0\", React.createElement(\"span\", {\n            className: \"table-view-card-id\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 474\n            },\n            __self: this\n          }, \" \", menu.id, \" \")), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 476\n            },\n            __self: this\n          }, menu.name), React.createElement(\"th\", {\n            restaurant_id: menu.restaurant.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 477\n            },\n            __self: this\n          }, menu.restaurant.name), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 478\n            },\n            __self: this\n          }, menu.order), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 479\n            },\n            __self: this\n          }, React.createElement(Button, {\n            color: \"warning\",\n            onClick: function onClick(e) {\n              e.stopPropagation();\n              e.preventDefault();\n              _this7.modal_data = menu;\n\n              _this7.toggle();\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 480\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-edit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 489\n            },\n            __self: this\n          })), React.createElement(Button, {\n            color: \"danger\",\n            onClick: function onClick(e) {\n              _this7.handleDelete(menu.id, e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 491\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-trash\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 497\n            },\n            __self: this\n          })))), React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 501\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            colSpan: 5,\n            style: {\n              padding: 0\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 502\n            },\n            __self: this\n          }, React.createElement(UncontrolledCollapse, {\n            toggler: \"toggle_menu_\".concat(index),\n            className: \"p-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 503\n            },\n            __self: this\n          }, React.createElement(Button, {\n            color: \"default\",\n            onClick: function onClick() {\n              _this7.addMenuItemInput(menu.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 507\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-plus\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 513\n            },\n            __self: this\n          }, \" Item\")), React.createElement(Button, {\n            color: \"primary\",\n            onClick: function onClick(e) {\n              return _this7.handleMenuItemSubmit(menu.id, e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 515\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-check\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 519\n            },\n            __self: this\n          }, \" Submit\")), React.createElement(\"input\", {\n            type: \"file\",\n            style: {\n              display: 'none'\n            },\n            onChange: _this7.onChangeCSVFile,\n            onClick: function onClick(e) {\n              return e.target.value = null;\n            },\n            ref: function ref(_ref) {\n              _this7.csvUploader = _ref;\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 521\n            },\n            __self: this\n          }), React.createElement(Button, {\n            color: \"default\",\n            onClick: function onClick() {\n              _this7.onClickAddItemFromExcel(menu.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 530\n            },\n            __self: this\n          }, \"\\xA0Add from CSV\"), React.createElement(Button, {\n            color: \"default\",\n            onClick: function onClick() {\n              _this7.onExportCSV(menu.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 533\n            },\n            __self: this\n          }, \"\\xA0Export csv\"), _this7.renderSubmitItems(menu), React.createElement(\"div\", {\n            className: \"w-100 border-bottom\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 542\n            },\n            __self: this\n          }), menu.items.map(function (item) {\n            return _this7.renderMenuItems(item);\n          })))));\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          loading = _this$props.loading,\n          message = _this$props.message;\n\n      if (loading) {\n        Swal({\n          title: 'Please wait...',\n          text: message,\n          onOpen: function onOpen() {\n            Swal.showLoading();\n          },\n          allowOutsideClick: false,\n          allowEscapeKey: false,\n          allowEnterKey: false\n        });\n      } else {\n        Swal.close();\n      }\n\n      if (this.props.data && this.props.data.length > 0) {\n        return React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 572\n          },\n          __self: this\n        }, React.createElement(Table, {\n          striped: true,\n          bordered: true,\n          responsive: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 574\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 575\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 576\n          },\n          __self: this\n        }, \"# \\xA0\\xA0\\xA0\", React.createElement(\"span\", {\n          className: \"table-view-card-id\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 576\n          },\n          __self: this\n        }, \" (id) \"), \" \"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 577\n          },\n          __self: this\n        }, \"Name\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 578\n          },\n          __self: this\n        }, \"Restaurant\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579\n          },\n          __self: this\n        }, \"Order\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }, \"Actions\"))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 583\n          },\n          __self: this\n        }, this.renderMenuTable())), React.createElement(MenuEditModal, {\n          modal: this.state.modal,\n          menu: this.modal_data,\n          toggle: this.toggle,\n          restaurants: this.props.restaurant.restaurants ? this.props.restaurant.restaurants.data : [],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 585\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 598\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return MenuTable;\n}(React.Component);\n\nexport default connect(function (state) {\n  return _objectSpread({}, state.default.services.item, {\n    restaurant: state.default.services.restaurant\n  });\n}, function (dispatch) {\n  return {\n    itemActions: bindActionCreators({\n      addItem: addItem,\n      deleteItem: deleteItem,\n      addItems: addItems,\n      updateItem: updateItem,\n      addItems1: addItems1\n    }, dispatch),\n    menuActions: bindActionCreators({\n      deleteMenu: deleteMenu\n    }, dispatch),\n    restaurantActions: bindActionCreators({\n      getRestaurants: getRestaurants\n    }, dispatch)\n  };\n})(withRouter(MenuTable));","map":{"version":3,"sources":["E:\\3-Limyong\\front\\src\\scenes\\Home\\scenes\\Menu\\scenes\\List\\components\\MenuTable\\MenuTable.js"],"names":["React","connect","bindActionCreators","Table","Button","UncontrolledCollapse","Input","Swal","withRouter","toastr","CSVParse","moment","ImageUploader","MenuEditModal","deleteMenu","addItem","addItems","deleteItem","addItems1","updateItem","getRestaurants","settings","queryString","imageUploaderStyle","position","height","minHeight","maxHeight","borderWidth","borderColor","borderStyle","borderRadius","MenuTable","props","submitData","editData","modal_data","state","modal","renderMenuTable","bind","handleEdit","handleDelete","handleOnLoad","handleOnLoadForEdit","handleEditMenuItem","handleDeleteMenuItem","renderSubmitItems","addMenuItemInput","handleUpdateMenuItem","toggle","onClickAddItemFromExcel","onChangeCSVFile","onExportCSV","restaurantActions","setState","id","history","push","title","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","menuActions","file","file_type","file_name","menuId","inputItemIndex","items","params","parse","location","search","itemActions","e","stopPropagation","menu_id","item_id","data","item","localStorage","setItem","csvUploader","click","event","target","files","undefined","console","log","filename","name","substr","length","warning","fileReader","FileReader","output","onload","on","record","read","format","getItem","parseFloat","INTEGER_PRECISION","readAsText","csv","csvFile","downloadLink","Blob","document","createElement","download","href","window","URL","createObjectURL","style","display","body","appendChild","join","rows","querySelectorAll","i","row","cols","attributes","innerText","downloadCSV","self","setTimeout","exportTableToCSV","order","image_url","price","evt","handleEditDataChange","BASE_URL","defaultItem","forceUpdate","menu","map","index","sort","a","b","keyA","keyB","restaurant","preventDefault","padding","handleMenuItemSubmit","ref","renderMenuItems","loading","message","onOpen","showLoading","allowOutsideClick","allowEscapeKey","allowEnterKey","close","restaurants","Component","default","services","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Table, Button, UncontrolledCollapse, Input } from 'reactstrap';\nimport Swal from 'sweetalert2';\nimport { withRouter } from 'react-router-dom';\nimport { toastr } from 'react-redux-toastr';\nimport CSVParse from 'csv-parse';\nimport moment from 'moment';\n\n// Import components\nimport ImageUploader from './../ImageUploader';\nimport MenuEditModal from './../MenuEditModal';\n\n// Import Actions\nimport { deleteMenu } from 'services/menu/menuActions';\nimport {\n  addItem,\n  addItems,\n  deleteItem,\n  addItems1,\n  updateItem\n} from 'services/item/itemActions';\nimport { getRestaurants } from 'services/restaurant/restaurantActions';\n\n// Import Settings\nimport settings from 'config/settings';\nimport queryString from 'query-string';\n\nconst imageUploaderStyle = {\n  position: 'relative',\n  height: '50px',\n  minHeight: '50px',\n  maxHeight: '50px',\n  borderWidth: '2px',\n  borderColor: 'rgb(102, 102, 102)',\n  borderStyle: 'dashed',\n  borderRadius: '5px'\n};\n\nclass MenuTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.submitData = []; // menu item submit data\n    this.editData = []; // menu item edit data\n    this.modal_data = {}; // Modal dialog data\n\n    this.state = {\n      modal: false // modal dialog flag\n    };\n\n    this.renderMenuTable = this.renderMenuTable.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleOnLoad = this.handleOnLoad.bind(this);\n    this.handleOnLoadForEdit = this.handleOnLoadForEdit.bind(this);\n    this.handleEditMenuItem = this.handleEditMenuItem.bind(this);\n    this.handleDeleteMenuItem = this.handleDeleteMenuItem.bind(this);\n    this.renderSubmitItems = this.renderSubmitItems.bind(this);\n    this.addMenuItemInput = this.addMenuItemInput.bind(this);\n    this.handleUpdateMenuItem = this.handleUpdateMenuItem.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.onClickAddItemFromExcel = this.onClickAddItemFromExcel.bind(this);\n    this.onChangeCSVFile = this.onChangeCSVFile.bind(this);\n    this.onExportCSV = this.onExportCSV.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.restaurantActions.getRestaurants();\n  }\n\n  /**\n   * Toggle modal dialog\n   */\n  toggle() {\n    this.setState({\n      modal: !this.state.modal\n    });\n  }\n\n  handleEdit(id) {\n    this.props.history.push(`/menus/${id}/edit`);\n  }\n\n  handleDelete(id) {\n    Swal({\n      title: 'Are you sure?',\n      text: \"You won't be able to revert this!\",\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    }).then(result => {\n      if (result.value) {\n        this.props.menuActions.deleteMenu(id);\n      }\n    });\n  }\n\n  handleOnLoad(file, file_type, file_name, menuId, inputItemIndex) {\n    this.submitData[menuId][inputItemIndex] = {\n      ...this.submitData[menuId][inputItemIndex],\n      file,\n      file_name,\n      file_type\n    };\n  }\n\n  handleOnLoadForEdit(file, file_type, file_name, menuId, inputItemIndex) {\n    this.editData[menuId][inputItemIndex] = {\n      ...this.editData[menuId][inputItemIndex],\n      file,\n      file_name,\n      file_type\n    };\n  }\n\n  handleMenuItemSubmit(id) {\n    const items = this.submitData[id];\n\n    const params = queryString.parse(this.props.location.search);\n\n    this.props.itemActions.addItems(items, params);\n  }\n\n  /// Handle edit button click event\n  handleEditMenuItem(id, e) {\n    e.stopPropagation();\n    this.props.history.push(`/items/${id}/edit`);\n  }\n\n  handleEditDataChange(menu_id, item_id, data) {\n    if (!this.editData[menu_id]) {\n      this.editData[menu_id] = [];\n    }\n\n    if (!this.editData[menu_id][item_id]) {\n      this.editData[menu_id][item_id] = {};\n    }\n\n    this.editData[menu_id][item_id] = {\n      ...this.editData[menu_id][item_id],\n      ...data\n    };\n  }\n\n  handleUpdateMenuItem(menu_id, item_id) {\n    const params = queryString.parse(this.props.location.search);\n    let data = {\n      id: item_id,\n      item: this.editData[menu_id][item_id],\n      params\n    };\n    this.props.itemActions.updateItem(data);\n  }\n\n  /// Handle delete button click event\n  handleDeleteMenuItem(id, e) {\n    e.stopPropagation();\n    Swal({\n      title: 'Are you sure?',\n      text: \"You won't be able to revert this!\",\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    }).then(result => {\n      if (result.value) {\n        const params = queryString.parse(this.props.location.search);\n        this.props.itemActions.deleteItem(id, params);\n      }\n    });\n  }\n\n  onClickAddItemFromExcel(menu_id) {\n    localStorage.setItem(\"current_menu_id\", menu_id);\n    this.csvUploader.click();\n  }\n\n  onChangeCSVFile(event) {\n    let file = event.target.files[0];\n    if(file === undefined){\n      return;\n    }\n    console.log(file);\n    const filename = file.name;\n    if(filename.substr(filename.length - 4, 4) !== \".csv\"){\n      toastr.warning('Warning', \"Please select .csv file\");\n      return;\n    }\n    const fileReader = new FileReader();\n    const output = [];\n    fileReader.onload = () => {\n      const params = queryString.parse(this.props.location.search);\n      CSVParse(fileReader.result, {})\n        .on('readable', function() {\n          let record;\n          while ((record = this.read())) {\n            let item = {};\n            if(record[6] === 'i'){\n              item['created_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['updated_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['id'] = record[0];\n              item['name'] = record[1];\n              item['order'] = record[2];\n              item['image_url'] = record[3];\n              item['menu_id'] = localStorage.getItem(\"current_menu_id\");\n              item['price'] = parseFloat(record[5]) * settings.INTEGER_PRECISION;\n              item['action'] = record[6];\n              output.push(item);\n            }\n          }\n        })\n        .on('end', () => {\n          console.log(output);\n          if(output.length === 0){\n            toastr.warning('Warning', \"No operations in file\");\n            return;\n          } else{\n            this.props.itemActions.addItems(output, params);\n          }\n        });\n    };\n    fileReader.readAsText(file, \"UTF-8\");\n  }\n\n  downloadCSV(csv, filename) {\n      var csvFile;\n      var downloadLink;\n      // CSV file\n      csvFile = new Blob([\"\\ufeff\"+csv], {type: \"text/csv;charset=UTF-8\"});\n      // Download link\n      downloadLink = document.createElement(\"a\");\n      // File name\n      downloadLink.download = filename;\n      // Create a link to the file\n      downloadLink.href = window.URL.createObjectURL(csvFile);\n      // Hide download link\n      downloadLink.style.display = \"none\";\n      // Add the link to DOM\n      document.body.appendChild(downloadLink);\n      // Click download link\n      downloadLink.click();\n  }\n\n  exportTableToCSV(filename, menu_id) {\n      var csv = [];\n      csv.push(['Item_Id', 'Name', 'Order', 'Image Url', 'Menu_Id', 'Price', 'Act(i)'].join(','));\n      var rows = document.querySelectorAll(\".items_menu_\" + menu_id);\n      for (var i = 0; i < rows.length; i++) {\n          var row = [], cols = rows[i].querySelectorAll(\".item\");\n          row.push(cols[0].attributes[1].value); // Item_Id\n          row.push(cols[0].innerText); // Name\n          row.push(cols[0].attributes[2].value); // Order\n          if(cols[0].attributes[3]){\n            row.push(cols[0].attributes[3].value); // Image Url\n          } else{\n            row.push(\"\");\n          }\n          row.push(menu_id); // Menu_Id\n          row.push(cols[1].innerText); // Price\n          row.push(\"\"); // Operation\n          csv.push(row.join(\",\"));\n      }\n      // Download CSV file\n      this.downloadCSV(csv.join(\"\\n\"), filename);\n  }\n\n  onExportCSV(menu_id){\n    let self = this;\n    setTimeout(function(){\n      const filename = \"Items_Menu_\" + menu_id + \".csv\"; \n      self.exportTableToCSV(filename, menu_id);\n    }, 500);\n  }\n\n  renderMenuItems(item) {\n    /// If edit data of this item is empty/undefined just initialize with {} object\n    if (!this.editData[item.menu_id]) {\n      this.editData[item.menu_id] = [];\n    }\n\n    if (!this.editData[item.menu_id][item.id]) {\n      this.editData[item.menu_id][item.id] = {\n        ...item\n      };\n    }\n    ////////////////////////////////////////////////////////////////////////////\n\n    return (\n      <div className={\"p-3 border-bottom items_menu_\"+item.menu_id} key={item.id}>\n        <div className=\"row\">\n          <div className=\"col-md-4 item\" data_id={item.id} data_order={item.order} data_image_url={item.image_url}>{item.name}</div>\n          <div className=\"col-md-4 item\">\n            {item.price / settings.INTEGER_PRECISION}\n          </div>\n          <div className=\"col-md-4\">\n            <Button\n              size=\"sm\"\n              color=\"warning\"\n              id={`toggle_menu_item_edit_${item.menu_id}_${item.id}`}\n            >\n              <i className=\"fa fa-edit\" />\n            </Button>\n            <Button\n              size=\"sm\"\n              color=\"danger\"\n              onClick={e => {\n                this.handleDeleteMenuItem(item.id, e);\n              }}\n            >\n              <i className=\"fa fa-trash\" />\n            </Button>\n          </div>\n        </div>\n        <UncontrolledCollapse\n          toggler={`toggle_menu_item_edit_${item.menu_id}_${item.id}`}\n        >\n          <div className=\"row mt-3\">\n            <div className=\"col-md-3\">\n              <Input\n                type=\"text\"\n                onChange={evt => {\n                  this.handleEditDataChange(item.menu_id, item.id, {\n                    name: evt.target.value\n                  });\n                }}\n                placeholder=\"Name\"\n                defaultValue={item.name}\n              />\n            </div>\n            <div className=\"col-md-3\">\n              <Input\n                type=\"text\"\n                placeholder=\"Price\"\n                onChange={evt => {\n                  this.handleEditDataChange(item.menu_id, item.id, {\n                    price:\n                      parseFloat(evt.target.value) * settings.INTEGER_PRECISION\n                  });\n                }}\n                defaultValue={item.price / settings.INTEGER_PRECISION}\n              />\n            </div>\n            <div className=\"col-md-3\">\n              <Input\n                type=\"text\"\n                onChange={evt => {\n                  this.handleEditDataChange(item.menu_id, item.id, {\n                    order: evt.target.value\n                  });\n                }}\n                defaultValue={item.order}\n                placeholder=\"Order\"\n              />\n            </div>\n            <div className=\"col-md-3\">\n              <ImageUploader\n                menuId={item.menu_id}\n                inputItemIndex={item.id}\n                style={imageUploaderStyle}\n                image={item.image_url ? settings.BASE_URL + item.image_url : ''}\n                handleOnLoad={this.handleOnLoadForEdit}\n              />\n            </div>\n          </div>\n          <div>\n            <Button\n              color=\"secondary\"\n              onClick={() => {\n                this.handleUpdateMenuItem(item.menu_id, item.id);\n              }}\n            >\n              <i className=\"fa fa-upload\"> Update</i>\n            </Button>\n          </div>\n        </UncontrolledCollapse>\n      </div>\n    );\n  }\n\n  addMenuItemInput(menuId) {\n    if (this.submitData[menuId]) {\n    } else {\n      this.submitData[menuId] = [];\n    }\n\n    let defaultItem = {\n      order: 1,\n      menu_id: menuId\n    };\n    \n    if (this.submitData[menuId].length == 1){\n      return;\n    }\n    this.submitData[menuId].push(defaultItem);\n    this.forceUpdate();\n  }\n\n  renderSubmitItems(menu) {\n    if (this.submitData[menu.id] && this.submitData[menu.id].length > 0) {\n      // eslint-disable-next-line\n      return this.submitData[menu.id].map((item, index) => (\n        <div className=\"row p-3\" key={index}>\n          <div className=\"col-md-3\">\n            <Input\n              type=\"text\"\n              onChange={evt => {\n                this.submitData[menu.id][index] = {\n                  ...this.submitData[menu.id][index],\n                  name: evt.target.value\n                };\n              }}\n              placeholder=\"Name\"\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <Input\n              type=\"text\"\n              placeholder=\"Price\"\n              onChange={evt => {\n                this.submitData[menu.id][index] = {\n                  ...this.submitData[menu.id][index],\n                  price:\n                    parseFloat(evt.target.value) * settings.INTEGER_PRECISION\n                };\n              }}\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <Input\n              type=\"text\"\n              onChange={evt => {\n                this.submitData[menu.id][index] = {\n                  ...this.submitData[menu.id][index],\n                  order: evt.target.value\n                };\n              }}\n              defaultValue={1}\n              placeholder=\"Name\"\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <ImageUploader\n              menuId={menu.id}\n              inputItemIndex={index}\n              style={imageUploaderStyle}\n              handleOnLoad={this.handleOnLoad}\n            />\n          </div>\n        </div>\n      ));\n    }\n  }\n\n  renderMenuTable() {\n    const { data } = this.props;\n    if (data && data.length > 0) {\n      data.sort(function(a, b){\n          var keyA = a.id,\n              keyB = b.id;\n          // Compare the 2 keys\n          if(keyA < keyB) return -1;\n          if(keyA > keyB) return 1;\n          return 0;\n      });\n      \n      return data.map((menu, index) => (\n        <React.Fragment key={index}>\n          <tr id={`toggle_menu_${index}`} className=\"menu-toggle\" key={menu.id}>\n            <th scope=\"row\" data_id={menu.id} data_image_url={menu.image_url}> \n              {index + 1} &nbsp;&nbsp;&nbsp;<span className=\"table-view-card-id\"> {menu.id} </span>  \n            </th>\n            <th>{menu.name}</th>\n            <th restaurant_id={menu.restaurant.id}>{menu.restaurant.name}</th>\n            <th>{menu.order}</th>\n            <th>\n              <Button\n                color=\"warning\"\n                onClick={e => {\n                  e.stopPropagation();\n                  e.preventDefault();\n                  this.modal_data = menu;\n                  this.toggle();\n                }}\n              >\n                <i className=\"fa fa-edit\" />\n              </Button>\n              <Button\n                color=\"danger\"\n                onClick={e => {\n                  this.handleDelete(menu.id, e);\n                }}\n              >\n                <i className=\"fa fa-trash\" />\n              </Button>\n            </th>\n          </tr>\n          <tr>\n            <th colSpan={5} style={{ padding: 0 }}>\n              <UncontrolledCollapse\n                toggler={`toggle_menu_${index}`}\n                className=\"p-3\"\n              >\n                <Button\n                  color=\"default\"\n                  onClick={() => {\n                    this.addMenuItemInput(menu.id);\n                  }}\n                >\n                  <i className=\"fa fa-plus\"> Item</i>\n                </Button>\n                <Button\n                  color=\"primary\"\n                  onClick={e => this.handleMenuItemSubmit(menu.id, e)}\n                >\n                  <i className=\"fa fa-check\"> Submit</i>\n                </Button>\n                <input\n                  type=\"file\"\n                  style={{ display: 'none' }}\n                  onChange={this.onChangeCSVFile}\n                  onClick={(e) => e.target.value = null}\n                  ref={ref => {\n                    this.csvUploader = ref;\n                  }}\n                />\n                <Button color=\"default\" onClick={()=>{this.onClickAddItemFromExcel(menu.id);}}>\n                  &nbsp;Add from CSV\n                </Button>\n                <Button \n                  color=\"default\" \n                  onClick={()=>{\n                    this.onExportCSV(menu.id);\n                  }}\n                >\n                  &nbsp;Export csv\n                </Button>\n                {this.renderSubmitItems(menu)}\n                <div className=\"w-100 border-bottom\" />\n                {menu.items.map(item => this.renderMenuItems(item))}\n              </UncontrolledCollapse>\n            </th>\n          </tr>\n        </React.Fragment>\n      ));\n    }\n  }\n\n  render() {\n    const { loading, message } = this.props;\n\n    if (loading) {\n      Swal({\n        title: 'Please wait...',\n        text: message,\n        onOpen: () => {\n          Swal.showLoading();\n        },\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        allowEnterKey: false\n      });\n    } else {\n      Swal.close();\n    }\n\n    if (this.props.data && this.props.data.length > 0) {\n      return (\n        <React.Fragment>\n          <Table striped bordered responsive>\n            <thead>\n              <tr>\n                <th># &nbsp;&nbsp;&nbsp;<span className=\"table-view-card-id\"> (id) </span> </th>\n                <th>Name</th>\n                <th>Restaurant</th>\n                <th>Order</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>{this.renderMenuTable()}</tbody>\n          </Table>\n          <MenuEditModal\n            modal={this.state.modal}\n            menu={this.modal_data}\n            toggle={this.toggle}\n            restaurants={\n              this.props.restaurant.restaurants\n                ? this.props.restaurant.restaurants.data\n                : []\n            }\n          />\n        </React.Fragment>\n      );\n    } else {\n      return <div />;\n    }\n  }\n}\n\nexport default connect(\n  state => ({\n    ...state.default.services.item,\n    restaurant: state.default.services.restaurant\n  }),\n  dispatch => ({\n    itemActions: bindActionCreators(\n      { addItem, deleteItem, addItems, updateItem, addItems1 },\n      dispatch\n    ),\n    menuActions: bindActionCreators({ deleteMenu }, dispatch),\n    restaurantActions: bindActionCreators({ getRestaurants }, dispatch)\n  })\n)(withRouter(MenuTable));\n"]},"metadata":{},"sourceType":"module"}