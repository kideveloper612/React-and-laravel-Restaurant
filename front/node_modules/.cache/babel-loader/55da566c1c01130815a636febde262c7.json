{"ast":null,"code":"import _defineProperty from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\3-Limyong\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\3-Limyong\\\\front\\\\src\\\\scenes\\\\Home\\\\scenes\\\\Categories\\\\scenes\\\\List\\\\List.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { toastr } from 'react-redux-toastr';\nimport Swal from 'sweetalert2';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\nimport CSVParse from 'csv-parse';\nimport moment from 'moment';\nimport { Button, FormGroup, Label, Input, UncontrolledCollapse, Card, CardImg, CardTitle, CardText, CardImgOverlay, Table, CardSubtitle } from 'reactstrap'; // Import Components\n\nimport { Pagination } from 'components'; // Import actions\n\nimport { getCategories, addCategories, deleteCategory } from 'services/category/categoryActions';\nimport { showModal } from 'modals/modalConductorActions'; // Import Utility functions\n\nimport { errorMsg, updateSearchQueryInUrl } from 'services/utils'; // Import settings\n\nimport settings from 'config/settings';\nvar VIEW_MODE_TILE = 'VIEW_MODE_TILE';\nvar VIEW_MODE_TABLE = 'VIEW_MODE_TABLE';\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(List, _React$Component);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n    _this.state = {\n      activePage: 1,\n      viewMode: VIEW_MODE_TILE\n    };\n    _this.filter = {};\n    _this.renderCategoriesTable = _this.renderCategoriesTable.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderPagination = _this.renderPagination.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderFilter = _this.renderFilter.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onAddClick = _this.onAddClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onPaginationSelect = _this.handleSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onFilterChange = _this.onFilterChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSearchClick = _this.onSearchClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onViewModeChange = _this.handleViewModeChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onEdit = _this.onEdit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDelete = _this.handleDelete.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onClickAddCategoryFromExcel = _this.onClickAddCategoryFromExcel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeCSVFile = _this.onChangeCSVFile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onExportCityCSV = _this.onExportCityCSV.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Parse query string and send async api call\n      var params = queryString.parse(this.props.location.search);\n\n      if (params.page) {\n        this.setState({\n          activePage: params.page\n        });\n      }\n\n      this.props.categoryActions.getCategories(params);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.error !== prevProps.error && this.props.error !== null) {\n        var msg = errorMsg(this.props.error);\n        toastr.error(msg.title, msg.message);\n      }\n\n      if (this.props.success !== prevProps.success && this.props.success === true) {\n        toastr.success('Success', this.props.message);\n      } // If query param is changed\n\n\n      if (prevProps.location.search !== this.props.location.search) {\n        var params = queryString.parse(this.props.location.search);\n\n        if (params.page) {\n          this.setState({\n            activePage: params.page\n          });\n        }\n\n        this.props.categoryActions.getCategories(params);\n      }\n    }\n  }, {\n    key: \"onFilterChange\",\n    value: function onFilterChange(e) {\n      this.filter = _objectSpread({}, this.filter, _defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"onAddClick\",\n    value: function onAddClick() {\n      this.props.modalActions.showModal('ADD_CATEGORY_MODAL');\n    }\n  }, {\n    key: \"onSearchClick\",\n    value: function onSearchClick() {\n      updateSearchQueryInUrl(this);\n    }\n  }, {\n    key: \"handleViewModeChange\",\n    value: function handleViewModeChange(viewMode) {\n      this.setState({\n        viewMode: viewMode\n      });\n    }\n  }, {\n    key: \"handleSelected\",\n    value: function handleSelected(selectedPage) {\n      var values = queryString.parse(this.props.location.search);\n      values = _objectSpread({}, values, {\n        page: selectedPage\n      });\n      var searchQuery = queryString.stringify(values);\n      this.props.history.push({\n        pathname: this.props.location.pathname,\n        search: \"?\".concat(searchQuery)\n      });\n    } /// Handle edit button click event\n\n  }, {\n    key: \"onEdit\",\n    value: function onEdit(category, e) {\n      e.stopPropagation();\n      this.props.modalActions.showModal('EDIT_CATEGORY_MODAL', category);\n    } /// Handle delete button click event\n\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(id, e) {\n      var _this2 = this;\n\n      e.stopPropagation();\n      Swal({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(function (result) {\n        if (result.value) {\n          _this2.props.categoryActions.deleteCategory(id);\n        }\n      });\n    }\n  }, {\n    key: \"onClickAddCategoryFromExcel\",\n    value: function onClickAddCategoryFromExcel() {\n      this.csvUploader.click();\n    }\n  }, {\n    key: \"onChangeCSVFile\",\n    value: function onChangeCSVFile(event) {\n      var _this3 = this;\n\n      var file = event.target.files[0];\n\n      if (file === undefined) {\n        return;\n      }\n\n      console.log(file);\n      var filename = file.name;\n\n      if (filename.substr(filename.length - 4, 4) !== \".csv\") {\n        toastr.warning('Warning', \"Please select .csv file\");\n        return;\n      }\n\n      var fileReader = new FileReader();\n      var output = [];\n\n      fileReader.onload = function () {\n        var params = queryString.parse(_this3.props.location.search);\n        CSVParse(fileReader.result, {}).on('readable', function () {\n          var record;\n\n          while (record = this.read()) {\n            var item = {};\n\n            if (record[6] !== '') {\n              item['created_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['updated_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['id'] = record[0];\n              item['name'] = record[1];\n              item['city_id'] = record[2];\n              item['order'] = record[3];\n              item['image_url'] = record[4];\n              item['is_open'] = record[5];\n              item['action'] = record[6];\n              output.push(item);\n            }\n          }\n        }).on('end', function () {\n          if (output[0]['id'] != \"Category_Id\") {\n            toastr.warning('Warning', \"Please select file for Category data\");\n            return;\n          }\n\n          output.splice(0, 1);\n          console.log(output);\n\n          if (output.length === 0) {\n            toastr.warning('Warning', \"No operations in file\");\n            return;\n          } else {\n            _this3.props.categoryActions.addCategories(output, params);\n          }\n        });\n      };\n\n      fileReader.readAsText(file, \"UTF-8\");\n    }\n  }, {\n    key: \"downloadCSV\",\n    value: function downloadCSV(csv, filename) {\n      var csvFile;\n      var downloadLink; // CSV file\n\n      csvFile = new Blob([\"\\uFEFF\" + csv], {\n        type: \"text/csv;charset=UTF-8\"\n      }); // Download link\n\n      downloadLink = document.createElement(\"a\"); // File name\n\n      downloadLink.download = filename; // Create a link to the file\n\n      downloadLink.href = window.URL.createObjectURL(csvFile); // Hide download link\n\n      downloadLink.style.display = \"none\"; // Add the link to DOM\n\n      document.body.appendChild(downloadLink); // Click download link\n\n      downloadLink.click();\n    }\n  }, {\n    key: \"exportTableToCSV\",\n    value: function exportTableToCSV(filename) {\n      var csv = [];\n      var rows = document.querySelectorAll(\"table tr\");\n\n      for (var i = 0; i < rows.length; i++) {\n        var row = [],\n            cols = rows[i].querySelectorAll(\"td, th\");\n\n        if (i === 0) {\n          row = ['Category_Id', 'Name', 'City_Id', 'Order', 'Image Url', 'Opened/Closed', 'Act(i/u/d)'];\n        } else {\n          row.push(cols[0].attributes[1].value); // Category_Id\n\n          row.push(cols[1].innerText); // Category Name\n\n          row.push(cols[2].attributes[0].value); // City_Id\n\n          row.push(cols[4].innerText); // Order\n\n          if (cols[0].attributes[2]) {\n            row.push(cols[0].attributes[2].value); // Image Url\n          } else {\n            row.push(\"\");\n          }\n\n          if (cols[3].innerText === 'Opened') {\n            row.push('1'); // Opened\n          } else {\n            row.push('0'); // Closed\n          }\n\n          row.push(\"\");\n        }\n\n        csv.push(row.join(\",\"));\n      } // Download CSV file\n\n\n      this.downloadCSV(csv.join(\"\\n\"), filename);\n    }\n  }, {\n    key: \"onExportCityCSV\",\n    value: function onExportCityCSV() {\n      this.setState({\n        viewMode: VIEW_MODE_TABLE\n      });\n      var self = this;\n      setTimeout(function () {\n        self.exportTableToCSV(\"Category.csv\");\n      }, 500);\n    }\n  }, {\n    key: \"renderCategoriesTable\",\n    value: function renderCategoriesTable() {\n      var _this4 = this;\n\n      if (this.props.categories) {\n        var data = this.props.categories.data;\n\n        if (data && data.length > 0) {\n          var categoryTableRows = data.map(function (category, index) {\n            return React.createElement(\"tr\", {\n              key: category.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 286\n              },\n              __self: this\n            }, React.createElement(\"th\", {\n              scope: \"row\",\n              data_id: category.id,\n              data_image: category.image_url,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 287\n              },\n              __self: this\n            }, \" \", index + 1, \" \"), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 288\n              },\n              __self: this\n            }, React.createElement(Link, {\n              to: {\n                pathname: '/restaurants',\n                search: \"?category=\".concat(category.id)\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 289\n              },\n              __self: this\n            }, category.name)), React.createElement(\"th\", {\n              data_city_id: category.city.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 298\n              },\n              __self: this\n            }, category.city.name), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 299\n              },\n              __self: this\n            }, category.is_open ? 'Opened' : 'Closed'), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 300\n              },\n              __self: this\n            }, category.order), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 301\n              },\n              __self: this\n            }, React.createElement(Button, {\n              color: \"warning\",\n              onClick: function onClick(e) {\n                _this4.onEdit(category, e);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 302\n              },\n              __self: this\n            }, React.createElement(\"i\", {\n              className: \"fa fa-edit\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 308\n              },\n              __self: this\n            })), React.createElement(Button, {\n              color: \"danger\",\n              onClick: function onClick(e) {\n                _this4.onDelete(category.id, e);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 310\n              },\n              __self: this\n            }, React.createElement(\"i\", {\n              className: \"fa fa-trash\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 316\n              },\n              __self: this\n            }))));\n          });\n          return React.createElement(Table, {\n            striped: true,\n            bordered: true,\n            responsive: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 322\n            },\n            __self: this\n          }, React.createElement(\"thead\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 323\n            },\n            __self: this\n          }, React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 324\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 325\n            },\n            __self: this\n          }, \"#\"), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 326\n            },\n            __self: this\n          }, \"Name\"), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 327\n            },\n            __self: this\n          }, \"City\"), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 328\n            },\n            __self: this\n          }, \"Open/Closed\"), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 329\n            },\n            __self: this\n          }, \"Order\"), React.createElement(\"th\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 330\n            },\n            __self: this\n          }, \"Actions\"))), React.createElement(\"tbody\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 333\n            },\n            __self: this\n          }, categoryTableRows));\n        } else {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 337\n            },\n            __self: this\n          }, \"No Categories Data to list\");\n        }\n      }\n    }\n  }, {\n    key: \"renderCategoriesTile\",\n    value: function renderCategoriesTile() {\n      var _this5 = this;\n\n      if (this.props.categories) {\n        var data = this.props.categories.data;\n\n        if (data && data.length > 0) {\n          return data.map(function (category, index) {\n            var closedSz = '';\n\n            if (!category.is_open) {\n              closedSz = '(Closed)';\n            }\n\n            return React.createElement(\"div\", {\n              key: index,\n              className: \"col-lg-3 col-md-6 col-xs-12 mb-3 d-flex align-items-stretch\",\n              onClick: function onClick() {\n                _this5.props.history.push(\"/restaurants?category=\".concat(category.id));\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 354\n              },\n              __self: this\n            }, React.createElement(Card, {\n              className: \"text-center w-100\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 361\n              },\n              __self: this\n            }, React.createElement(CardImg, {\n              top: true,\n              width: \"100%\",\n              height: \"280px\",\n              className: \"\",\n              src: settings.BASE_URL + category.image_url,\n              alt: category.name,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 362\n              },\n              __self: this\n            }), React.createElement(\"div\", {\n              className: \"normal-tile-overlay\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 370\n              },\n              __self: this\n            }), React.createElement(CardImgOverlay, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 371\n              },\n              __self: this\n            }, React.createElement(CardTitle, {\n              className: \"tile-view-card-title\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 372\n              },\n              __self: this\n            }, category.name + closedSz), React.createElement(CardSubtitle, {\n              className: \"text-white\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 375\n              },\n              __self: this\n            }, category.city ? category.city.name : 'N/A'), React.createElement(CardText, {\n              className: \"tile-view-card-id\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 378\n              },\n              __self: this\n            }, category.id), React.createElement(\"div\", {\n              className: \"card-buttons-hover-show\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 381\n              },\n              __self: this\n            }, React.createElement(Button, {\n              size: \"sm\",\n              color: \"warning\",\n              onClick: function onClick(e) {\n                _this5.onEdit(category, e);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 382\n              },\n              __self: this\n            }, React.createElement(\"i\", {\n              className: \"fa fa-edit\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 389\n              },\n              __self: this\n            })), React.createElement(Button, {\n              size: \"sm\",\n              color: \"danger\",\n              onClick: function onClick(e) {\n                _this5.handleDelete(category.id, e);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 391\n              },\n              __self: this\n            }, React.createElement(\"i\", {\n              className: \"fa fa-trash\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 398\n              },\n              __self: this\n            }))))));\n          });\n        } else {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 407\n            },\n            __self: this\n          }, \"No Categories Data to list\");\n        }\n      }\n    }\n  }, {\n    key: \"renderPagination\",\n    value: function renderPagination() {\n      if (this.props.categories && this.props.categories.meta && this.props.categories.data && this.props.categories.data.length > 0) {\n        return React.createElement(Pagination, {\n          totalItems: this.props.categories.meta.total,\n          pageSize: parseInt(this.props.categories.meta.per_page),\n          onSelect: this.handleSelected,\n          activePage: parseInt(this.state.activePage),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420\n          },\n          __self: this\n        });\n      }\n    }\n  }, {\n    key: \"renderFilter\",\n    value: function renderFilter() {\n      var _this6 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"default\",\n        onClick: this.onAddClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435\n        },\n        __self: this\n      }), \"\\xA0Add category\"), React.createElement(Button, {\n        id: \"toggle_category\",\n        color: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, \"Open filter\\xA0\", React.createElement(\"i\", {\n        className: \"fa fa-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"file\",\n        style: {\n          display: 'none'\n        },\n        onChange: this.onChangeCSVFile,\n        onClick: function onClick(e) {\n          return e.target.value = null;\n        },\n        ref: function ref(_ref) {\n          _this6.csvUploader = _ref;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442\n        },\n        __self: this\n      }), React.createElement(Button, {\n        color: \"default\",\n        onClick: this.onClickAddCategoryFromExcel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-file-excel-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452\n        },\n        __self: this\n      }), \"\\xA0Add from CSV\"), React.createElement(Button, {\n        color: \"default\",\n        onClick: this.onExportCityCSV,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-file-excel-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459\n        },\n        __self: this\n      }), \"\\xA0Export csv\"), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this6.handleViewModeChange(VIEW_MODE_TILE);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-th\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this6.handleViewModeChange(VIEW_MODE_TABLE);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-th-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      })), React.createElement(UncontrolledCollapse, {\n        toggler: \"#toggle_category\",\n        className: \"col-md-8 col-sm-12 mt-5 mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473\n        },\n        __self: this\n      }, \"Category name\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"category_name\",\n        onChange: this.onFilterChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      }, \"City name\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"city_name\",\n        onChange: this.onFilterChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: this.onSearchClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }), \"Search\")));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          loading = _this$props.loading,\n          message = _this$props.message; // if loading status show sweet alert\n\n      if (loading) {\n        Swal({\n          title: 'Please wait...',\n          text: message,\n          onOpen: function onOpen() {\n            Swal.showLoading();\n          },\n          allowOutsideClick: false,\n          allowEscapeKey: false,\n          allowEnterKey: false\n        });\n      } else {\n        Swal.close();\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"text-center mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518\n        },\n        __self: this\n      }, \"Categories\"), React.createElement(\"div\", {\n        className: \"mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519\n        },\n        __self: this\n      }, this.renderFilter()), React.createElement(\"div\", {\n        className: \"d-flex flex-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525\n        },\n        __self: this\n      }, this.state.viewMode === VIEW_MODE_TABLE ? this.renderCategoriesTable() : React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }, this.renderCategoriesTile()), this.renderPagination()));\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nexport default connect(function (state) {\n  return _objectSpread({}, state.default.services.category);\n}, function (dispatch) {\n  return {\n    categoryActions: bindActionCreators({\n      addCategories: addCategories,\n      getCategories: getCategories,\n      deleteCategory: deleteCategory\n    }, dispatch),\n    modalActions: bindActionCreators({\n      showModal: showModal\n    }, dispatch)\n  };\n})(List);","map":{"version":3,"sources":["E:\\3-Limyong\\front\\src\\scenes\\Home\\scenes\\Categories\\scenes\\List\\List.js"],"names":["React","connect","bindActionCreators","toastr","Swal","queryString","Link","CSVParse","moment","Button","FormGroup","Label","Input","UncontrolledCollapse","Card","CardImg","CardTitle","CardText","CardImgOverlay","Table","CardSubtitle","Pagination","getCategories","addCategories","deleteCategory","showModal","errorMsg","updateSearchQueryInUrl","settings","VIEW_MODE_TILE","VIEW_MODE_TABLE","List","props","state","activePage","viewMode","filter","renderCategoriesTable","bind","renderPagination","renderFilter","onAddClick","onPaginationSelect","handleSelected","onFilterChange","onSearchClick","onViewModeChange","handleViewModeChange","onEdit","onDelete","handleDelete","onClickAddCategoryFromExcel","onChangeCSVFile","onExportCityCSV","params","parse","location","search","page","setState","categoryActions","prevProps","error","msg","title","message","success","e","target","name","value","modalActions","selectedPage","values","searchQuery","stringify","history","push","pathname","category","stopPropagation","id","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","csvUploader","click","event","file","files","undefined","console","log","filename","substr","length","warning","fileReader","FileReader","output","onload","on","record","read","item","format","splice","readAsText","csv","csvFile","downloadLink","Blob","document","createElement","download","href","window","URL","createObjectURL","style","display","body","appendChild","rows","querySelectorAll","i","row","cols","attributes","innerText","join","downloadCSV","self","setTimeout","exportTableToCSV","categories","data","categoryTableRows","map","index","image_url","city","is_open","order","closedSz","BASE_URL","meta","total","parseInt","per_page","ref","loading","onOpen","showLoading","allowOutsideClick","allowEscapeKey","allowEnterKey","close","renderCategoriesTile","Component","default","services","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { toastr } from 'react-redux-toastr';\nimport Swal from 'sweetalert2';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\nimport CSVParse from 'csv-parse';\nimport moment from 'moment';\nimport {\n  Button,\n  FormGroup,\n  Label,\n  Input,\n  UncontrolledCollapse,\n  Card,\n  CardImg,\n  CardTitle,\n  CardText,\n  CardImgOverlay,\n  Table,\n  CardSubtitle\n} from 'reactstrap';\n\n// Import Components\nimport { Pagination } from 'components';\n\n// Import actions\nimport {\n  getCategories,\n  addCategories,\n  deleteCategory\n} from 'services/category/categoryActions';\nimport { showModal } from 'modals/modalConductorActions';\n\n// Import Utility functions\nimport { errorMsg, updateSearchQueryInUrl } from 'services/utils';\n\n// Import settings\nimport settings from 'config/settings';\n\nconst VIEW_MODE_TILE = 'VIEW_MODE_TILE';\nconst VIEW_MODE_TABLE = 'VIEW_MODE_TABLE';\n\nclass List extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activePage: 1,\n      viewMode: VIEW_MODE_TILE\n    };\n\n    this.filter = {};\n\n    this.renderCategoriesTable = this.renderCategoriesTable.bind(this);\n    this.renderPagination = this.renderPagination.bind(this);\n    this.renderFilter = this.renderFilter.bind(this);\n\n    this.onAddClick = this.onAddClick.bind(this);\n    this.onPaginationSelect = this.handleSelected.bind(this);\n    this.onFilterChange = this.onFilterChange.bind(this);\n    this.onSearchClick = this.onSearchClick.bind(this);\n    this.onViewModeChange = this.handleViewModeChange.bind(this);\n    this.onEdit = this.onEdit.bind(this);\n    this.onDelete = this.handleDelete.bind(this);\n    this.onClickAddCategoryFromExcel = this.onClickAddCategoryFromExcel.bind(this);\n    this.onChangeCSVFile = this.onChangeCSVFile.bind(this);\n    this.onExportCityCSV = this.onExportCityCSV.bind(this);\n  }\n\n  componentDidMount() {\n    // Parse query string and send async api call\n    const params = queryString.parse(this.props.location.search);\n    if (params.page) {\n      this.setState({\n        activePage: params.page\n      });\n    }\n    this.props.categoryActions.getCategories(params);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.error !== prevProps.error && this.props.error !== null) {\n      let msg = errorMsg(this.props.error);\n      toastr.error(msg.title, msg.message);\n    }\n\n    if (\n      this.props.success !== prevProps.success &&\n      this.props.success === true\n    ) {\n      toastr.success('Success', this.props.message);\n    }\n\n    // If query param is changed\n    if (prevProps.location.search !== this.props.location.search) {\n      const params = queryString.parse(this.props.location.search);\n      if (params.page) {\n        this.setState({\n          activePage: params.page\n        });\n      }\n      this.props.categoryActions.getCategories(params);\n    }\n  }\n\n  onFilterChange(e) {\n    this.filter = {\n      ...this.filter,\n      [e.target.name]: e.target.value\n    };\n  }\n\n  onAddClick() {\n    this.props.modalActions.showModal('ADD_CATEGORY_MODAL');\n  }\n\n  onSearchClick() {\n    updateSearchQueryInUrl(this);\n  }\n\n  handleViewModeChange(viewMode) {\n    this.setState({\n      viewMode\n    });\n  }\n\n  handleSelected(selectedPage) {\n    let values = queryString.parse(this.props.location.search);\n    values = {\n      ...values,\n      page: selectedPage\n    };\n\n    const searchQuery = queryString.stringify(values);\n    this.props.history.push({\n      pathname: this.props.location.pathname,\n      search: `?${searchQuery}`\n    });\n  }\n\n  /// Handle edit button click event\n  onEdit(category, e) {\n    e.stopPropagation();\n    this.props.modalActions.showModal('EDIT_CATEGORY_MODAL', category);\n  }\n\n  /// Handle delete button click event\n  handleDelete(id, e) {\n    e.stopPropagation();\n    Swal({\n      title: 'Are you sure?',\n      text: \"You won't be able to revert this!\",\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    }).then(result => {\n      if (result.value) {\n        this.props.categoryActions.deleteCategory(id);\n      }\n    });\n  }\n\n  onClickAddCategoryFromExcel() {\n    this.csvUploader.click();\n  }\n\n  onChangeCSVFile(event) {\n    let file = event.target.files[0];\n    if(file === undefined){\n      return;\n    }\n    console.log(file);\n    const filename = file.name;\n    if(filename.substr(filename.length - 4, 4) !== \".csv\"){\n      toastr.warning('Warning', \"Please select .csv file\");\n      return;\n    }\n    const fileReader = new FileReader();\n    const output = [];\n    fileReader.onload = () => {\n      const params = queryString.parse(this.props.location.search);\n      CSVParse(fileReader.result, {})\n        .on('readable', function() {\n          let record;\n          while ((record = this.read())) {\n            let item = {};\n            if(record[6] !== ''){\n              item['created_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['updated_at'] = moment().format('YYYY-MM-DD HH:mm:ss');\n              item['id'] = record[0];\n              item['name'] = record[1];\n              item['city_id'] = record[2];\n              item['order'] = record[3];\n              item['image_url'] = record[4];\n              item['is_open'] = record[5];\n              item['action'] = record[6];\n              output.push(item);\n            }\n          }\n        })\n        .on('end', () => {\n          if(output[0]['id'] != \"Category_Id\"){\n            toastr.warning('Warning', \"Please select file for Category data\");\n            return;\n          }          \n          output.splice(0, 1);\n          console.log(output);\n          if(output.length === 0){\n            toastr.warning('Warning', \"No operations in file\");\n            return;\n          } else{\n            this.props.categoryActions.addCategories(output, params);\n          }\n        });\n    };\n    fileReader.readAsText(file, \"UTF-8\");\n  }\n\n  downloadCSV(csv, filename) {\n      var csvFile;\n      var downloadLink;\n      // CSV file\n      csvFile = new Blob([\"\\ufeff\"+csv], {type: \"text/csv;charset=UTF-8\"});\n      // Download link\n      downloadLink = document.createElement(\"a\");\n      // File name\n      downloadLink.download = filename;\n      // Create a link to the file\n      downloadLink.href = window.URL.createObjectURL(csvFile);\n      // Hide download link\n      downloadLink.style.display = \"none\";\n      // Add the link to DOM\n      document.body.appendChild(downloadLink);\n      // Click download link\n      downloadLink.click();\n  }\n\n  exportTableToCSV(filename) {\n      var csv = [];\n      var rows = document.querySelectorAll(\"table tr\");\n      for (var i = 0; i < rows.length; i++) {\n          var row = [], cols = rows[i].querySelectorAll(\"td, th\");\n          if(i === 0){\n            row = ['Category_Id', 'Name', 'City_Id', 'Order', 'Image Url', 'Opened/Closed', 'Act(i/u/d)'];\n          } else{\n            row.push(cols[0].attributes[1].value); // Category_Id\n            row.push(cols[1].innerText); // Category Name\n            row.push(cols[2].attributes[0].value); // City_Id\n            row.push(cols[4].innerText); // Order\n            if(cols[0].attributes[2]){\n              row.push(cols[0].attributes[2].value); // Image Url\n            } else{\n              row.push(\"\");\n            }\n            if(cols[3].innerText === 'Opened'){\n              row.push('1'); // Opened\n            } else{\n              row.push('0'); // Closed\n            }\n            row.push(\"\");\n          }\n          csv.push(row.join(\",\"));\n      }\n      // Download CSV file\n      this.downloadCSV(csv.join(\"\\n\"), filename);\n  }\n\n  onExportCityCSV(){\n    this.setState({viewMode: VIEW_MODE_TABLE});\n    let self = this;\n    setTimeout(function(){\n      self.exportTableToCSV(\"Category.csv\");\n    }, 500);\n  }\n\n  renderCategoriesTable() {\n    if (this.props.categories) {\n      const { data } = this.props.categories;\n\n      if (data && data.length > 0) {\n        const categoryTableRows = data.map((category, index) => (\n          <tr key={category.id}>\n            <th scope=\"row\" data_id={category.id} data_image={category.image_url}> {index + 1} </th>\n            <th>\n              <Link\n                to={{\n                  pathname: '/restaurants',\n                  search: `?category=${category.id}`\n                }}\n              >\n                {category.name}\n              </Link>\n            </th>\n            <th data_city_id={category.city.id}>{category.city.name}</th>\n            <th>{category.is_open ? 'Opened' : 'Closed'}</th>\n            <th>{category.order}</th>\n            <th>\n              <Button\n                color=\"warning\"\n                onClick={e => {\n                  this.onEdit(category, e);\n                }}\n              >\n                <i className=\"fa fa-edit\" />\n              </Button>\n              <Button\n                color=\"danger\"\n                onClick={e => {\n                  this.onDelete(category.id, e);\n                }}\n              >\n                <i className=\"fa fa-trash\" />\n              </Button>\n            </th>\n          </tr>\n        ));\n        return (\n          <Table striped bordered responsive>\n            <thead>\n              <tr>\n                <th>#</th>\n                <th>Name</th>\n                <th>City</th>\n                <th>Open/Closed</th>\n                <th>Order</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>{categoryTableRows}</tbody>\n          </Table>\n        );\n      } else {\n        return <div>No Categories Data to list</div>;\n      }\n    }\n  }\n\n  renderCategoriesTile() {\n    if (this.props.categories) {\n      const { data } = this.props.categories;\n\n      if (data && data.length > 0) {\n        return data.map((category, index) => {\n          let closedSz = '';\n          if (!category.is_open) {\n            closedSz = '(Closed)';\n          }\n\n          return (\n            <div\n              key={index}\n              className=\"col-lg-3 col-md-6 col-xs-12 mb-3 d-flex align-items-stretch\"\n              onClick={() => {\n                this.props.history.push(`/restaurants?category=${category.id}`);\n              }}\n            >\n              <Card className=\"text-center w-100\">\n                <CardImg\n                  top\n                  width=\"100%\"\n                  height=\"280px\"\n                  className=\"\"\n                  src={settings.BASE_URL + category.image_url}\n                  alt={category.name}\n                />\n                <div className=\"normal-tile-overlay\" />\n                <CardImgOverlay>\n                  <CardTitle className=\"tile-view-card-title\">\n                    {category.name + closedSz}\n                  </CardTitle>\n                  <CardSubtitle className=\"text-white\">\n                    {category.city ? category.city.name : 'N/A'}\n                  </CardSubtitle>\n                  <CardText className=\"tile-view-card-id\"> \n                    {category.id} \n                  </CardText>\n                  <div className=\"card-buttons-hover-show\">\n                    <Button\n                      size=\"sm\"\n                      color=\"warning\"\n                      onClick={e => {\n                        this.onEdit(category, e);\n                      }}\n                    >\n                      <i className=\"fa fa-edit\" />\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      color=\"danger\"\n                      onClick={e => {\n                        this.handleDelete(category.id, e);\n                      }}\n                    >\n                      <i className=\"fa fa-trash\" />\n                    </Button>\n                  </div>\n                </CardImgOverlay>\n              </Card>\n            </div>\n          );\n        });\n      } else {\n        return <div>No Categories Data to list</div>;\n      }\n    }\n  }\n\n  renderPagination() {\n    if (\n      this.props.categories &&\n      this.props.categories.meta &&\n      this.props.categories.data &&\n      this.props.categories.data.length > 0\n    ) {\n      return (\n        <Pagination\n          totalItems={this.props.categories.meta.total}\n          pageSize={parseInt(this.props.categories.meta.per_page)}\n          onSelect={this.handleSelected}\n          activePage={parseInt(this.state.activePage)}\n        />\n      );\n    }\n  }\n\n  renderFilter() {\n    return (\n      <div>\n        {/* Action button */}\n        <Button color=\"default\" onClick={this.onAddClick}>\n          <i className=\"fa fa-plus\" />\n          &nbsp;Add category\n        </Button>\n        <Button id=\"toggle_category\" color=\"warning\">\n          Open filter&nbsp;\n          <i className=\"fa fa-filter\" />\n        </Button>\n        <input\n          type=\"file\"\n          style={{ display: 'none' }}\n          onChange={this.onChangeCSVFile}\n          onClick={(e) => e.target.value = null}\n          ref={ref => {\n            this.csvUploader = ref;\n          }}\n        />\n        <Button color=\"default\" onClick={this.onClickAddCategoryFromExcel}>\n          <i className=\"fa fa-file-excel-o\" />\n          &nbsp;Add from CSV\n        </Button>\n        <Button \n          color=\"default\" \n          onClick={this.onExportCityCSV} \n        >\n          <i className=\"fa fa-file-excel-o\" />\n          &nbsp;Export csv\n        </Button>\n        <Button onClick={() => this.handleViewModeChange(VIEW_MODE_TILE)}>\n          <i className=\"fa fa-th\" />\n        </Button>\n        <Button onClick={() => this.handleViewModeChange(VIEW_MODE_TABLE)}>\n          <i className=\"fa fa-th-list\" />\n        </Button>\n        <UncontrolledCollapse\n          toggler=\"#toggle_category\"\n          className=\"col-md-8 col-sm-12 mt-5 mb-5\"\n        >\n          <FormGroup>\n            <Label>Category name</Label>\n            <Input\n              type=\"text\"\n              name=\"category_name\"\n              onChange={this.onFilterChange}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>City name</Label>\n            <Input\n              type=\"text\"\n              name=\"city_name\"\n              onChange={this.onFilterChange}\n            />\n          </FormGroup>\n          <Button onClick={this.onSearchClick}>\n            <i className=\"fa fa-search\" />\n            Search\n          </Button>\n        </UncontrolledCollapse>\n      </div>\n    );\n  }\n\n  render() {\n    const { loading, message } = this.props;\n\n    // if loading status show sweet alert\n    if (loading) {\n      Swal({\n        title: 'Please wait...',\n        text: message,\n        onOpen: () => {\n          Swal.showLoading();\n        },\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        allowEnterKey: false\n      });\n    } else {\n      Swal.close();\n    }\n\n    return (\n      <div>\n        <h1 className=\"text-center mb-5\">Categories</h1>\n        <div className=\"mb-3\">\n          {/* Render category filter section */}\n          {this.renderFilter()}\n        </div>\n\n        {/* Table */}\n        <div className=\"d-flex flex-column\">\n          {/* Render categories table */}\n          {this.state.viewMode === VIEW_MODE_TABLE ? (\n            this.renderCategoriesTable()\n          ) : (\n            <div className=\"row\">{this.renderCategoriesTile()}</div>\n          )}\n          {/* Render pagination */}\n          {this.renderPagination()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    ...state.default.services.category\n  }),\n  dispatch => ({\n    categoryActions: bindActionCreators(\n      { addCategories, getCategories, deleteCategory },\n      dispatch\n    ),\n    modalActions: bindActionCreators({ showModal }, dispatch)\n  })\n)(List);\n"]},"metadata":{},"sourceType":"module"}